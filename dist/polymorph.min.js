!function(r,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((r=r||self).polymorph={})}(this,function(r){"use strict"
var _=void 0,h=" ",p="fill",g="none",M="V",P="H",j="L",S="Z",C="M",E="C",T="S",$="Q",F="T",H="A"
function d(r){return"string"==typeof r}var n=Math,I=n.abs,u=n.min,y=n.max,c=n.floor,x=n.round,L=n.sqrt,e=n.pow,O=n.cos,Q=n.asin,V=n.sin,Z=n.tan,U=n.PI,k=2/3,f=e(2,-52)
function B(){throw new Error(Array.prototype.join.call(arguments,h))}function m(r,n){for(var e in n)r.hasOwnProperty(e)||(r[e]=n[e])
return r}var t="undefined"!=typeof window&&window.navigator.userAgent,i=/(MSIE |Trident\/|Edge\/)/i.test(t)?Array:Float32Array
function w(r){return new i(r)}function l(r,n,e,t){return L((r-e)*(r-e)+(n-t)*(n-t))}function A(r,n,e){var t=e.length
if(e[t-2]===e[0]&&e[t-1]===e[1]){var i,o,a=e.slice(2)
t=a.length
for(var f=0;f<t;f+=6){var u=l(r,n,a[f],a[f+1])
o!==_&&o<=u||(o=u,i=f)}!function(r,n){var e,t=r.length,i=t-n,o=w(n)
for(e=0;e<n;e++)o[e]=r[e]
for(e=n;e<t;e++)r[e-n]=r[e]
for(e=0;e<n;e++)r[i+e]=o[e]}(a,i),e[0]=a[t-2],e[1]=a[t-1]
for(f=0;f<a.length;f++)e[f+2]=a[f]}}function b(r,n){var e=n-r.length,t=Math.ceil(e/r.length),i=w(n)
i[0]=r[0],i[1]=r[1]
for(var o=1,a=1;a<n-1;){i[++a]=r[++o],i[++a]=r[++o],i[++a]=r[++o],i[++a]=r[++o]
var f=i[++a]=r[++o],u=i[++a]=r[++o]
if(e)for(var c=0;c<t&&e;c++)i[a+5]=i[a+3]=i[a+1]=f,i[a+6]=i[a+4]=i[a+2]=u,a+=6,e-=6}return i}function o(r,n){return n.p-r.p}function v(r,n,e){var t=z(r),i=z(n),o=e.origin,a=o.x,f=o.y,u=o.absolute
t.length!==i.length&&(e.optimize===p?function r(n,e,t){var i=n.length,o=e.length
if(i<o)return r(e,n,t)
e.length=i
for(var a=o;a<i;a++){for(var f=n[a],u=w(f.d.length),c=0;c<f.d.length;c+=2)u[c]=t.absolute?t.x:f.x+f.w*t.x,u[c+1]=t.absolute?t.y:f.y+f.y*t.y
e[a]=m({d:u},f)}}(t,i,e.origin):B("optimize:none requires equal lengths"))
var c=Array(2)
if(c[0]=t.map(q),c[1]=i.map(q),e.optimize!==g)for(var l=0;l<t.length;l++){var v=t[l],s=i[l]
A(u?a:v.x+v.w*a,u?f:v.y+v.h*f,c[0][l]),A(u?a:s.x+s.w*a,u?f:s.y+s.h*f,c[1][l])}return e.optimize===p&&function(r,n){for(var e=r[0].length,t=0;t<e;t++){var i=r[0][t],o=r[1][t],a=y(i.length+n,o.length+n)
r[0][t]=b(i,a),r[1][t]=b(o,a)}}(c,6*e.addPoints),c}function z(r){return r.data.slice().sort(o)}function q(r){return r.d}var a={addPoints:0,optimize:p,origin:{x:0,y:0},precision:0}
function s(r,n){n=m(n,a),r&&2<=r.length||B("invalid arguments")
for(var t=r.length-1,i=Array(t),e=0;e<t;e++)i[e]=D(r[e],r[e+1],n)
var o=n.precision?function(r){return r.toFixed(n.precision)}:_
return function(r){var n=t*r,e=u(c(n),t-1)
return function(r,n){if(void 0===n&&(n=x),d(r))return r
for(var e=[],t=0;t<r.length;t++){var i=r[t]
e.push(C,n(i[0]),n(i[1]),E)
for(var o=void 0,a=2;a<i.length;a+=6){var f=n(i[a]),u=n(i[a+1]),c=n(i[a+2]),l=n(i[a+3]),v=n(i[a+4]),s=n(i[a+5])
f==v&&c==v&&u==s&&l==s&&o==(o=""+f+u+c+l+v+s)||e.push(f,u,c,l,v,s)}}return e.join(h)}(i[e]((n-e)/(e+1)),o)}}function D(t,i,r){var o=v(t,i,r),a=o[0].length
return function(r){if(I(r-0)<f)return t.path
if(I(r-1)<f)return i.path
for(var n=Array(a),e=0;e<a;e++)n[e]=G(o[0][e],o[1][e],r)
return n}}function G(r,n,e){for(var t=r.length,i=w(t),o=0;o<t;o++)i[o]=r[o]+(n[o]-r[o])*e
return i}function J(r,n){return r===_?n:r}var K=120*U/180,N=2*U
function R(r,n,e,t,i,o,a,f,u,c,l,v,s){if(e<=0||t<=0)return[r,n,f,u,f,u]
var h,p=U/180*(+i||0),g=O(p),d=V(p),y=!!c
if(!y){var x=r,m=f,w=((r=x*g-n*-d)-(f=m*g-u*-d))/2,A=((n=x*-d+n*g)-(u=m*-d+u*g))/2,b=w*w/(e*e)+A*A/(t*t)
1<b&&(e*=b=L(b),t*=b)
var z=(o===a?-1:1)*L(I((e*e*t*t-e*e*A*A-t*t*w*w)/(e*e*A*A+t*t*w*w)))
v=z*e*A/t+(r+f)/2,c=Q((n-(s=z*-t*w/e+(n+u)/2))/t),l=Q((u-s)/t),r<v&&(c=U-c),f<v&&(l=U-l),c<0&&(c+=N),l<0&&(l+=N),a&&l<c&&(c-=N),!a&&c<l&&(l-=N)}if(I(l-c)>K){var q=l,M=f,P=u
h=R(f=v+e*O(l=c+K*(a&&c<l?1:-1)),u=s+t*V(l),e,t,i,0,a,M,P,l,q,v,s)}else h=[]
var j=4/3*Z((l-c)/4)
if(h.splice(0,0,2*r-(r+j*e*V(c)),2*n-(n-j*t*O(c)),f+j*e*V(l),u-j*t*O(l),f,u),!y)for(var S=0,C=h.length;S<C;S+=2){var E=h[S],T=h[S+1]
h[S]=E*g-T*d,h[S+1]=E*d+T*g}return h}var W={M:2,H:1,V:1,L:2,Z:0,C:6,S:4,Q:4,T:2,A:7}
function X(r,n,e,t,i,o,a){var f=r.x,u=r.y
r.x=J(o,f),r.y=J(a,u),r.current.push(J(n,f),e=J(e,u),t=J(t,f),i=J(i,u),r.x,r.y),r.lc=r.c}function Y(r){var n=r.c,e=r.t,t=r.x,i=r.y
if(n===M)e[0]+=i
else if(n===P)e[0]+=t
else if(n===H)e[5]+=t,e[6]+=i
else for(var o=0;o<e.length;o+=2)e[o]+=t,e[o+1]+=i}function rr(r){return r.split(h).map(nr)}function nr(r,n){return 0===n?r:+r}function er(r){for(var n={x:0,y:0,segments:[]},e=function(r){return r.replace(/[\^\s]*([mhvlzcsqta]|\-?\d*\.?\d+)[,\$\s]*/gi," $1").replace(/([mhvlzcsqta])/gi," $1").trim().split("  ").map(rr)}(r),t=0;t<e.length;t++){var i=e[t],o=i[0],a=o.toUpperCase(),f=a!==S&&a!==o
n.c=a
var u=W[a],c=i,l=1
do{n.t=1===c.length?c:c.slice(l,l+u),f&&Y(n)
var v=n.t,s=n.x,h=n.y,p=void 0,g=void 0,d=void 0,y=void 0,x=void 0,m=void 0
if(a===C)n.segments.push(n.current=[n.x=v[0],n.y=v[1]])
else if(a===P)X(n,_,_,_,_,v[0],_)
else if(a===M)X(n,_,_,_,_,_,v[0])
else if(a===j)X(n,_,_,_,_,v[0],v[1])
else if(a===S)X(n,_,_,_,_,n.current[0],n.current[1])
else if(a===E)X(n,v[0],v[1],v[2],v[3],v[4],v[5]),n.cx=v[2],n.cy=v[3]
else if(a===T){var w=n.lc!==T&&n.lc!==E
X(n,p=w?_:2*s-n.cx,g=w?_:2*h-n.cy,v[0],v[1],v[2],v[3]),n.cx=v[0],n.cy=v[1]}else if(a===$){var A=v[0],b=v[1]
d=v[2],y=v[3],X(n,s+(A-s)*k,h+(b-h)*k,d+(A-d)*k,y+(b-y)*k,d,y),n.cx=A,n.cy=b}else if(a===F)d=v[0],y=v[1],n.lc===$||n.lc===F?(p=s+(2*s-n.cx-s)*k,g=h+(2*h-n.cy-h)*k,x=d+(2*s-n.cx-d)*k,m=y+(2*h-n.cy-y)*k):(p=x=s,g=m=h),X(n,p,g,x,m,d,y),n.cx=x,n.cy=m
else if(a===H)for(var z=R(s,h,v[0],v[1],v[2],v[3],v[4],v[5],v[6]),q=0;q<z.length;q+=6)X(n,z[q],z[q+1],z[q+2],z[q+3],z[q+4],z[q+5])
else B(n.c," is not supported")
l+=u}while(l<c.length)}return n.segments}function tr(r){for(var n=r[0],e=r[1],t=e,i=n,o=2;o<r.length;o+=6){var a=r[o+4],f=r[o+5]
n=u(n,a),i=y(i,a),e=u(e,f),t=y(t,f)}return{d:r,x:n,y:e,w:i-n,h:t-e,p:function(r){for(var n=r.length,e=r[n-2],t=r[n-1],i=0,o=0;o<n;o+=6)i+=l(r[o],r[o+1],e,t),e=r[o],t=r[o+1]
return c(i)}(r)}}var ir=/^([#|\.]|path)/i
function or(r){return function(r){return{path:r,data:er(r).map(tr)}}(function(r){if(d(r)){if(!ir.test(r))return r
r=document.querySelector(r)}return r.getAttribute("d")}(r))}r.interpolate=function(r,n){return s(r.map(or),n||{})},Object.defineProperty(r,"__esModule",{value:!0})})
