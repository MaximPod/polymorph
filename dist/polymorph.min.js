!function(r,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(r.polymorph={})}(this,function(r){"use strict"
var _=void 0,M="V",S="H",P="L",j="Z",C="M",E="C",F="S",T="Q",$="T",H="A",p=" ",h="fill",g="none"
function d(r){return"string"==typeof r}var n=Math,I=n.abs,l=n.min,y=n.max,u=n.floor,t=n.round,L=n.sqrt,e=n.pow,Q=n.cos,V=n.asin,Z=n.sin,O=n.tan,U=n.PI,k=2/3,c=e(2,-52)
function x(r,n){for(var t in r=r||{},n)t in r||(r[t]=n[t])
return r}var i="undefined"!=typeof window&&window.navigator.userAgent,o=/(MSIE |Trident\/|Edge\/)/i.test(i)?Array:Float32Array
function m(r){return new o(r)}function v(r,n,t,e){return L((r-t)*(r-t)+(n-e)*(n-e))}function w(r,n,t){var e=t.length
if(t[e-2]===t[0]&&t[e-1]===t[1]){var i,o,a=t.slice(2)
e=a.length
for(var f=0;f<e;f+=6){var u=v(r,n,a[f],a[f+1]);(o===_||u<o)&&(o=u,i=f)}!function(r,n){var t,e=r.length,i=e-n,o=m(n)
for(t=0;t<n;t++)o[t]=r[t]
for(t=n;t<e;t++)r[t-n]=r[t]
for(t=0;t<n;t++)r[i+t]=o[t]}(a,i),t[0]=a[e-2],t[1]=a[e-1]
for(f=0;f<a.length;f++)t[f+2]=a[f]}}function A(r,n){var t=n-r.length,e=Math.ceil(t/r.length),i=m(n)
i[0]=r[0],i[1]=r[1]
for(var o=1,a=1;a<n-1;){i[++a]=r[++o],i[++a]=r[++o],i[++a]=r[++o],i[++a]=r[++o]
var f=i[++a]=r[++o],u=i[++a]=r[++o]
if(t)for(var c=0;c<e&&t;c++)i[a+5]=i[a+3]=i[a+1]=f,i[a+6]=i[a+4]=i[a+2]=u,a+=6,t-=6}return i}function B(r){throw Error(r)}function a(r,n){return n.p-r.p}function s(r,n,t){var e=b(r),i=b(n),o=t.origin,a=o.x,f=o.y,u=o.absolute
e.length!==i.length&&(t.optimize===h?function r(n,t,e){var i=n.length,o=t.length
if(i<o)return r(t,n,e)
t.length=i
for(var a=o;a<i;a++){for(var f=n[a],u=m(f.d.length),c=0;c<f.d.length;c+=2)u[c]=e.absolute?e.x:f.x+f.w*e.x,u[c+1]=e.absolute?e.y:f.y+f.y*e.y
t[a]=x({d:u},f)}}(e,i,t.origin):B("optimize:none requires equal lengths"))
var c=Array(2)
if(c[0]=e.map(q),c[1]=i.map(q),t.optimize!==g)for(var l=0;l<e.length;l++){var v=e[l],s=i[l]
w(u?a:v.x+v.w*a,u?f:v.y+v.h*f,c[0][l]),w(u?a:s.x+s.w*a,u?f:s.y+s.h*f,c[1][l])}return t.optimize===h&&function(r){for(var n=r[0].length,t=0;t<n;t++){var e=r[0][t],i=r[1][t],o=y(e.length,i.length)
r[0][t]=A(e,o),r[1][t]=A(i,o)}}(c),c}function b(r){return r.data.slice().sort(a)}function q(r){return r.d}function z(r,n){return r===_?n:r}var D=120*U/180,G=2*U
function J(r,n,t,e,i,o,a,f,u,c,l,v,s){if(t<=0||e<=0)return[r,n,f,u,f,u]
var p,h=U/180*(+i||0),g=Q(h),d=Z(h),y=!!c
if(!y){var x=r,m=f,w=((r=x*g-n*-d)-(f=m*g-u*-d))/2,A=((n=x*-d+n*g)-(u=m*-d+u*g))/2,b=w*w/(t*t)+A*A/(e*e)
1<b&&(t*=b=L(b),e*=b)
var q=(o===a?-1:1)*L(I((t*t*e*e-t*t*A*A-e*e*w*w)/(t*t*A*A+e*e*w*w)))
v=q*t*A/e+(r+f)/2,c=V((n-(s=q*-e*w/t+(n+u)/2))/e),l=V((u-s)/e),r<v&&(c=U-c),f<v&&(l=U-l),c<0&&(c+=G),l<0&&(l+=G),a&&l<c&&(c-=G),!a&&c<l&&(l-=G)}if(I(l-c)>D){var z=l,M=f,S=u
p=J(f=v+t*Q(l=c+D*(a&&c<l?1:-1)),u=s+e*Z(l),t,e,i,0,a,M,S,l,z,v,s)}else p=[]
var P=4/3*O((l-c)/4)
if(p.splice(0,0,2*r-(r+P*t*Z(c)),2*n-(n-P*e*Q(c)),f+P*t*Z(l),u-P*e*Q(l),f,u),!y)for(var j=0,C=p.length;j<C;j+=2){var E=p[j],F=p[j+1]
p[j]=E*g-F*d,p[j+1]=E*d+F*g}return p}var K={M:2,H:1,V:1,L:2,Z:0,C:6,S:4,Q:4,T:2,A:7}
function N(r,n,t,e,i,o,a){var f=r.x,u=r.y
r.x=z(o,f),r.y=z(a,u),r.p.push(z(n,f),t=z(t,u),e=z(e,f),i=z(i,u),r.x,r.y),r.lc=r.c}function R(r){var n=r.c,t=r.t,e=r.x,i=r.y
if(n===M)t[0]+=i
else if(n===S)t[0]+=e
else if(n===H)t[5]+=e,t[6]+=i
else for(var o=0;o<t.length;o+=2)t[o]+=e,t[o+1]+=i}function W(r){return r.split(p).map(f)}function f(r,n){return 0===n?r:+r}function X(r){for(var n={x:0,y:0,s:[]},t=r.replace(/[\^\s]*([mhvlzcsqta]|\-?\d*\.?\d+)[,\$\s]*/gi," $1").replace(/([mhvlzcsqta])/gi," $1").trim().split("  ").map(W),e=0;e<t.length;e++){var i=t[e],o=i[0],a=o.toUpperCase(),f=a!==j&&a!==o
n.c=a
var u=K[a],c=i,l=1
do{n.t=1===c.length?c:c.slice(l,l+u),f&&R(n)
var v=n.t,s=n.x,p=n.y,h=void 0,g=void 0,d=void 0,y=void 0,x=void 0,m=void 0
if(a===C)n.s.push(n.p=[n.x=v[0],n.y=v[1]])
else if(a===S)N(n,_,_,_,_,v[0],_)
else if(a===M)N(n,_,_,_,_,_,v[0])
else if(a===P)N(n,_,_,_,_,v[0],v[1])
else if(a===j)N(n,_,_,_,_,n.p[0],n.p[1])
else if(a===E)N(n,v[0],v[1],v[2],v[3],v[4],v[5]),n.cx=v[2],n.cy=v[3]
else if(a===F){var w=n.lc!==F&&n.lc!==E
N(n,h=w?_:2*s-n.cx,g=w?_:2*p-n.cy,v[0],v[1],v[2],v[3]),n.cx=v[0],n.cy=v[1]}else if(a===T){var A=v[0],b=v[1]
d=v[2],y=v[3],N(n,s+(A-s)*k,p+(b-p)*k,d+(A-d)*k,y+(b-y)*k,d,y),n.cx=A,n.cy=b}else if(a===$)d=v[0],y=v[1],n.lc===T||n.lc===$?(h=s+(2*s-n.cx-s)*k,g=p+(2*p-n.cy-p)*k,x=d+(2*s-n.cx-d)*k,m=y+(2*p-n.cy-y)*k):(h=x=s,g=m=p),N(n,h,g,x,m,d,y),n.cx=x,n.cy=m
else if(a===H)for(var q=J(s,p,v[0],v[1],v[2],v[3],v[4],v[5],v[6]),z=0;z<q.length;z+=6)N(n,q[z],q[z+1],q[z+2],q[z+3],q[z+4],q[z+5])
else B(n.c+" is not supported")
l+=u}while(l<c.length)}return n.s}function Y(r){for(var n=r[0],t=r[1],e=t,i=n,o=2;o<r.length;o+=6){var a=r[o+4],f=r[o+5]
n=l(n,a),i=y(i,a),t=l(t,f),e=y(e,f)}return{d:r,x:n,y:t,w:i-n,h:e-t,p:function(r){for(var n=r.length,t=r[n-2],e=r[n-1],i=0,o=0;o<n;o+=6)i+=v(r[o],r[o+1],t,e),t=r[o],e=r[o+1]
return u(i)}(r)}}function rr(r){return{path:r,data:X(r).map(Y)}}var nr=/^([#|\.]|path)/i
function tr(r){if(d(r)){if(!nr.test(r))return r
r=document.querySelector(r)}return r.getAttribute("d")}var er={optimize:h,origin:{x:0,y:0},precision:0}
function ir(n){var e=rr(tr((n=x(n,er)).fromPath)),i=rr(tr(n.toPath)),o=n.precision?function(r){return r.toFixed(n.precision)}:t,a=s(e,i,n),f=a[0].length
return function(r){if(I(r-0)<c)return e.path
if(I(r-1)<c)return i.path
for(var n=Array(f),t=0;t<f;t++)n[t]=or(a[0][t],a[1][t],r)
return function(r,n){if(d(r))return r
for(var t=[],e=0;e<r.length;e++){var i=r[e]
t.push(C,n(i[0]),n(i[1]),E)
for(var o=void 0,a=2;a<i.length;a+=6){var f=n(i[a]),u=n(i[a+1]),c=n(i[a+2]),l=n(i[a+3]),v=n(i[a+4]),s=n(i[a+5])
f==v&&c==v&&u==s&&l==s&&o==(o=""+f+u+c+l+v+s)||t.push(f,u,c,l,v,s)}}return t.join(p)}(n,o)}}function or(r,n,t){for(var e=r.length,i=m(e),o=0;o<e;o++)i[o]=r[o]+(n[o]-r[o])*t
return i}r.mix=ir,r.animate=function(r){var n=r.target
"string"==typeof r.target&&(n=document.querySelector(n))
var t,e,i,o,a,f,u,c=ir(r)
return t=function(r){n.setAttribute("d",c(r))},e=r.duration,f=function(r){var n=+!i||-(o||r)+(o=r)
return t(l(y((a+=n)/e,0),1)),!i||e<=a||requestAnimationFrame(f)},u={play:function(){return i=1,a<=e||(a=0),f(performance.now()),u},pause:function(){return i=0,u},stop:function(){return a=o=i=0,u}}},Object.defineProperty(r,"__esModule",{value:!0})})
