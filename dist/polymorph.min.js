!function(r,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((r=r||self).polymorph={})}(this,function(r){"use strict"
var _=void 0,g=" ",s="fill",P="V",b="H",q="L",M="Z",j="M",E="C",C="S",O="Q",T="T",V="A"
var t=Math,$=t.abs,u=t.min,c=t.max,o=t.floor,h=t.round,F=t.sqrt,n=t.pow,H=t.cos,I=t.asin,L=t.sin,Q=t.tan,U=t.PI,Z=2/3,f=n(2,-52)
function G(){throw new Error(Array.prototype.join.call(arguments,g))}function p(r,t){for(var n in t)r.hasOwnProperty(n)||(r[n]=t[n])
return r}var e="undefined"!=typeof window&&window.navigator.userAgent,i=/(MSIE |Trident\/|Edge\/)/i.test(e)?Array:Float32Array
function d(r){return new i(r)}function y(r,t,n){var e=function(r){for(var t=r[0],n=r[1],e=n,i=t,a=2;a<r.length;a+=6){var o=r[a+4],f=r[a+5]
t=u(t,o),i=c(i,o),n=u(n,f),e=c(e,f)}return{x:t,w:i-t,y:n,h:e-n}}(n)
return{x:e.x+e.w*r,y:e.y+e.h*t}}function v(r,t,n,e){return F((r-n)*(r-n)+(t-e)*(t-e))}function l(r,t,n,e){var i=e.length
if(e[i-2]===e[0]&&e[i-1]===e[1]){if(!r){var a=y(t,n,e)
t=a.x,n=a.y}var o,f,u=e.slice(2)
i=u.length
for(var s=0;s<i;s+=6){var c=v(t,t,u[s],u[s+1])
f!==_&&f<=c||(f=c,o=s)}!function(r,t){var n,e=r.length,i=e-t,a=d(t)
for(n=0;n<t;n++)a[n]=r[n]
for(n=t;n<e;n++)r[n-t]=r[n]
for(n=0;n<t;n++)r[i+n]=a[n]}(u,o),e[0]=u[i-2],e[1]=u[i-1]
for(s=0;s<u.length;s++)e[s+2]=u[s]}}function m(r,t){var n=t-r.length,e=Math.ceil(n/r.length),i=d(t)
i[0]=r[0],i[1]=r[1]
for(var a=1,o=1;o<t-1;){i[++o]=r[++a],i[++o]=r[++a],i[++o]=r[++a],i[++o]=r[++a]
var f=i[++o]=r[++a],u=i[++o]=r[++a]
if(n)for(var s=0;s<e&&n;s++)i[o+5]=i[o+3]=i[o+1]=f,i[o+6]=i[o+4]=i[o+2]=u,o+=6,n-=6}return i}function x(r){return r.map(function(r){return{points:r,perimeter:function(r){for(var t=r.length,n=r[t-2],e=r[t-1],i=0,a=0;a<t;a+=6)i+=v(r[a],r[a+1],n,e),n=r[a],e=r[a+1]
return o(i)}(r)}}).sort(function(r,t){return t.perimeter-r.perimeter}).map(function(r){return r.points})}function D(r,t,n){n.optimize===s&&(r=x(r),t=x(t)),r.length!==t.length&&(n.optimize===s?function r(t,n,e){var i=t.length,a=n.length
if(i<a)return r(n,t,e)
n.length=i
for(var o=a;o<i;o++){var f=t[o],u=e.x,s=e.y
if(!e.absolute){var c=y(u,s,f)
u=c.x,s=c.y}for(var v=d(f.length),l=0;l<f.length;l+=2)v[l]=u,v[l+1]=s
n[o]=p({d:v},f)}}(r,t,n.origin):G("optimize:none requires equal lengths"))
var e=Array(2)
if(e[0]=r,e[1]=t,n.optimize===s){for(var i=n.origin,a=i.x,o=i.y,f=i.absolute,u=0;u<r.length;u++)l(f,a,o,e[0][u]),l(f,a,o,e[1][u])
!function(r,t){for(var n=r[0].length,e=0;e<n;e++){var i=r[0][e],a=r[1][e],o=c(i.length+t,a.length+t)
r[0][e]=m(i,o),r[1][e]=m(a,o)}}(e,6*n.addPoints)}return e}var w={addPoints:0,optimize:s,origin:{x:0,y:0},precision:0}
function a(r,t){t=p(t,w),r&&2<=r.length||G("invalid arguments")
for(var e=r.length-1,i=Array(e),n=0;n<e;n++)i[n]=A(r[n],r[n+1],t)
var a=t.precision?function(r){return r.toFixed(t.precision)}:_
return function(r){var t=e*r,n=u(o(t),e-1)
return function(r,t){if(void 0===t&&(t=h),function(r){return"string"==typeof r}(r))return r
for(var n=[],e=0;e<r.length;e++){var i=r[e]
n.push(j,t(i[0]),t(i[1]),E)
for(var a=void 0,o=2;o<i.length;o+=6){var f=t(i[o]),u=t(i[o+1]),s=t(i[o+2]),c=t(i[o+3]),v=t(i[o+4]),l=t(i[o+5])
f==v&&s==v&&u==l&&c==l&&a==(a=""+f+u+s+c+v+l)||n.push(f,u,s,c,v,l)}}return n.join(g)}(i[n]((t-n)/(n+1)),a)}}function A(e,i,r){var a=D(e.getData(),i.getData(),r),o=a[0].length
return function(r){if($(r-0)<f)return e.getStringData()
if($(r-1)<f)return i.getStringData()
for(var t=Array(o),n=0;n<o;n++)t[n]=z(a[0][n],a[1][n],r)
return t}}function z(r,t,n){for(var e=r.length,i=d(e),a=0;a<e;a++)i[a]=r[a]+(t[a]-r[a])*n
return i}function S(r,t){return r===_?t:r}var N=120*U/180,k=2*U
function B(r,t,n,e,i,a,o,f,u,s,c,v,l){if(n<=0||e<=0)return[r,t,f,u,f,u]
var g,h=U/180*(+i||0),p=H(h),d=L(h),y=!!s
if(!y){var m=r,x=f,D=((r=m*p-t*-d)-(f=x*p-u*-d))/2,w=((t=m*-d+t*p)-(u=x*-d+u*p))/2,A=D*D/(n*n)+w*w/(e*e)
1<A&&(n*=A=F(A),e*=A)
var z=(a===o?-1:1)*F($((n*n*e*e-n*n*w*w-e*e*D*D)/(n*n*w*w+e*e*D*D)))
v=z*n*w/e+(r+f)/2,s=I((t-(l=z*-e*D/n+(t+u)/2))/e),c=I((u-l)/e),r<v&&(s=U-s),f<v&&(c=U-c),s<0&&(s+=k),c<0&&(c+=k),o&&c<s&&(s-=k),!o&&s<c&&(c-=k)}if($(c-s)>N){var S=c,P=f,b=u
g=B(f=v+n*H(c=s+N*(o&&s<c?1:-1)),u=l+e*L(c),n,e,i,0,o,P,b,c,S,v,l)}else g=[]
var q=4/3*Q((c-s)/4)
if(g.splice(0,0,2*r-(r+q*n*L(s)),2*t-(t-q*e*H(s)),f+q*n*L(c),u-q*e*H(c),f,u),!y)for(var M=0,j=g.length;M<j;M+=2){var E=g[M],C=g[M+1]
g[M]=E*p-C*d,g[M+1]=E*d+C*p}return g}var J={M:2,H:1,V:1,L:2,Z:0,C:6,S:4,Q:4,T:2,A:7}
function K(r,t,n,e,i,a,o){var f=r.x,u=r.y
r.x=S(a,f),r.y=S(o,u),r.current.push(S(t,f),n=S(n,u),e=S(e,f),i=S(i,u),r.x,r.y),r.lc=r.c}function R(r){var t=r.c,n=r.t,e=r.x,i=r.y
if(t===P)n[0]+=i
else if(t===b)n[0]+=e
else if(t===V)n[5]+=e,n[6]+=i
else for(var a=0;a<n.length;a+=2)n[a]+=e,n[a+1]+=i}function W(r){return r.split(g).map(X)}function X(r,t){return 0===t?r:+r}function Y(r){for(var t={x:0,y:0,segments:[]},n=function(r){return r.replace(/[\^\s]*([mhvlzcsqta]|\-?\d*\.?\d+)[,\$\s]*/gi," $1").replace(/([mhvlzcsqta])/gi," $1").trim().split("  ").map(W)}(r),e=0;e<n.length;e++){var i=n[e],a=i[0],o=a.toUpperCase(),f=o!==M&&o!==a
t.c=o
var u=J[o],s=i,c=1
do{t.t=1===s.length?s:s.slice(c,c+u),f&&R(t)
var v=t.t,l=t.x,g=t.y,h=void 0,p=void 0,d=void 0,y=void 0,m=void 0,x=void 0
if(o===j)t.segments.push(t.current=[t.x=v[0],t.y=v[1]])
else if(o===b)K(t,_,_,_,_,v[0],_)
else if(o===P)K(t,_,_,_,_,_,v[0])
else if(o===q)K(t,_,_,_,_,v[0],v[1])
else if(o===M)K(t,_,_,_,_,t.current[0],t.current[1])
else if(o===E)K(t,v[0],v[1],v[2],v[3],v[4],v[5]),t.cx=v[2],t.cy=v[3]
else if(o===C){var D=t.lc!==C&&t.lc!==E
K(t,h=D?_:2*l-t.cx,p=D?_:2*g-t.cy,v[0],v[1],v[2],v[3]),t.cx=v[0],t.cy=v[1]}else if(o===O){var w=v[0],A=v[1]
d=v[2],y=v[3],K(t,l+(w-l)*Z,g+(A-g)*Z,d+(w-d)*Z,y+(A-y)*Z,d,y),t.cx=w,t.cy=A}else if(o===T)d=v[0],y=v[1],t.lc===O||t.lc===T?(h=l+(2*l-t.cx-l)*Z,p=g+(2*g-t.cy-g)*Z,m=d+(2*l-t.cx-d)*Z,x=y+(2*g-t.cy-y)*Z):(h=m=l,p=x=g),K(t,h,p,m,x,d,y),t.cx=m,t.cy=x
else if(o===V)for(var z=B(l,g,v[0],v[1],v[2],v[3],v[4],v[5],v[6]),S=0;S<z.length;S+=6)K(t,z[S],z[S+1],z[S+2],z[S+3],z[S+4],z[S+5])
else G(t.c," is not supported")
c+=u}while(c<s.length)}return t.segments}var rr=/^([#|\.]|path)/i
var tr=(nr.prototype.getData=function(){return this.data},nr.prototype.getStringData=function(){return this.stringData||(this.stringData=this.render()),this.stringData},nr.prototype.createOptimizedPair=function(r,t){var n=D(this.data,r.data,t),e=new nr(n[0])
e.stringData=this.stringData
var i=new nr(n[1])
return i.stringData=r.stringData,[e,i]},nr.prototype.render=function(r){void 0===r&&(r=h)
for(var t=this.data,n=[],e=0;e<t.length;e++){var i=t[e]
n.push(j,r(i[0]),r(i[1]),E)
for(var a=void 0,o=2;o<i.length;o+=6){var f=r(i[o]),u=r(i[o+1]),s=r(i[o+2]),c=r(i[o+3]),v=r(i[o+4]),l=r(i[o+5])
f==v&&s==v&&u==l&&c==l&&a==(a=""+f+u+s+c+v+l)||n.push(f,u,s,c,v,l)}}return n.join(g)},nr)
function nr(r){var t=function(r){if(Array.isArray(r))return{data:r,stringData:_}
var t
if("string"==typeof r&&rr.test(r)?r=document.querySelector(r):t=r,"string"==typeof r)return{data:Y(r),stringData:t}
var n=r
return n instanceof SVGPathElement?{data:Y(t=n.getAttribute("d")),stringData:t}:G("Unsupported element ",n.tagName)}(r),n=t.data,e=t.stringData
this.data=n,this.stringData=e}r.interpolate=function(r,t){return a(r.map(function(r){return new tr(r)}),t||{})},Object.defineProperty(r,"__esModule",{value:!0})})
